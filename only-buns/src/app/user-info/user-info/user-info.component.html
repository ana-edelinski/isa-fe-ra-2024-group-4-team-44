<div *ngIf="user" class="user-card">
    <div class="user-card-header">
      <img src="assets/background.jpg" alt="Background" class="background" />
    </div>
    <div class="user-info">
      <img [src]="user.avatar || 'assets/default-avatar.jpg'" alt="{{ user.name }}" class="avatar" />
      <div class="name-container">
        <h2 class="user-name">{{ user.name }} {{ user.surname }}</h2>
        <span class="username">{{ '@' + user.username }}</span>
      </div>      
      <p class="email">üìß {{ user.email }}</p>
  
      <div *ngIf="user.street || user.city || user.postalCode" class="address">
        <p>
          üè† {{user.street }}, {{ user.city }}{{ user.postalCode ? ', ' + user.postalCode : '' }}
        </p>
      </div>

      <div *ngIf="authService.isAuthenticated()" class="follow-info">
        <p>
          <span (click)="showModal('following')" class="clickable-text">
            Following: <strong>{{ followingCount }}</strong>
          </span>
        </p>
        <p>
          <span (click)="showModal('followers')" class="clickable-text">
            Followers: <strong>{{ followersCount }}</strong>
          </span>
        </p>
      </div>
      
      
      <div *ngIf="isModalOpen" class="modal-overlay" (click)="closeModal()">
        <div class="modal-content" (click)="$event.stopPropagation()">
          <div class="modal-header">
            <h2>{{ modalTitle }}</h2>
            <button class="close-button" (click)="closeModal()">√ó</button>
          </div>
          <div class="modal-body">
            <div *ngIf="modalUsers.length === 0">
              <p *ngIf="modalTitle === 'Following'">No following</p>
              <p *ngIf="modalTitle === 'Followers'">No followers</p>
            </div>
            <div *ngFor="let user of modalUsers" class="user-row">
              <img [src]="user.avatar || 'assets/default-avatar.jpg'" alt="Avatar" class="user-avatar">
              <div class="user-info">
                <p class="username" (click)="navigateToProfile(user.id)">{{ user.username }}</p>
                <p class="name">{{ user.name }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
        
      <div class="buttons" *ngIf="!isMyProfile && authService.isAuthenticated()">
        <button class="follow-button" (click)="toggleFollow()">
            {{ isFollowing ? 'Following' : 'Follow' }}
        </button>
        <button class="message-button">Message</button>
    </div>

    <div class="profile-tag" *ngIf="isMyProfile">
        <p>This is how your profile looks like to others.</p>
    </div>
    </div>
  </div>
  
  <div *ngIf="posts.length > 0" class="posts-container">
    <div *ngFor="let post of posts" class="post-card">
      <h3>Posts by {{ user.name }}</h3>
      <mat-card class="post-card-content">
        <div class="post-header">
          <div class="post-left">
            <p class="post-description">{{ post.description }}</p>
            <div class="post-meta">
              <span class="post-creator">{{ user.username }}</span> |
              <span class="post-time">{{ post.creationTime | date:'short' }}</span>
            </div>
          </div>
          <div class="post-right">
            <img [src]="post.imagePath" alt="Post Image" class="post-image" *ngIf="post.imagePath">
          </div>
        </div>
        <div class="post-footer">
          <div class="post-likes" (click)="likeUnlikePost(post.id)">
            <mat-icon>favorite</mat-icon> 
            <span>{{ post.likeCount }}</span>
          </div>
          <div class="post-comments">
            <mat-icon>comment</mat-icon> {{ post.comments.length || 0 }} 
          </div>
          <button mat-button (click)="viewDetails(post.id)">View Details</button>
        </div>
      </mat-card>
    </div>
  </div>
  
  <div *ngIf="posts.length === 0" class="no-posts">
    <p>{{ user.name }} has no posts yet.</p>
  </div>
  