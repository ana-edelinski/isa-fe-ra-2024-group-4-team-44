<div class="main-content">
  <div class="header-container">
    <h3>Registered Users</h3>
    <div class="controls-container">
      <select [(ngModel)]="selectedSort" (change)="onSortChange()" class="sort-dropdown">
        <option value="default">Default Sorting</option>
        <option value="email">Sort by Email (Ascending)</option>
        <option value="email-desc">Sort by Email (Descending)</option>
        <option value="following">Sort by Following (Ascending)</option>
        <option value="following-desc">Sort by Following (Descending)</option>
      </select>      
      <mat-icon (click)="toggleSearch()" class="search-icon">search</mat-icon>
    </div>
  </div>

  <!-- Search bar -->
  <div class="search-container" *ngIf="isSearchVisible">
    <div class="search-bar">
      <input type="text" placeholder="Search by name" [(ngModel)]="searchCriteria.name" />
      <input type="text" placeholder="Search by surname" [(ngModel)]="searchCriteria.surname" />
      <input type="text" placeholder="Search by email" [(ngModel)]="searchCriteria.email" />
      <input type="number" placeholder="Min posts" [(ngModel)]="searchCriteria.minPosts" />
      <input type="number" placeholder="Max posts" [(ngModel)]="searchCriteria.maxPosts" />
    </div>
    <div class="buttons">
      <button class="btn btn-search" (click)="searchUsers(true)">Search</button>
      <button class="btn btn-clear" (click)="clearSearch()">Clear</button>
    </div>
  </div>

  <div class="card-container">
    <div *ngFor="let user of users" class="user-card">
      <div class="card-header">
        <h4>{{ user.username }}</h4>
        <a (click)="goToProfile(user.id)" class="username-link">View Profile</a>
      </div>
      <div class="card-body">
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>Name:</strong> {{ user.name }} {{ user.surname }}</p>
        <p><strong>Posts:</strong> {{ user.numberOfPosts }}</p>
        <p><strong>Following:</strong> {{ user.numberOfFollowing }}</p>
      </div>
    </div>
  </div>

  <div class="pagination" style="margin-top: 15px; text-align: center;">
    <button (click)="changePage(currentPage - 1)" [disabled]="currentPage === 0">
      Previous
    </button>
    <span> Page {{ currentPage + 1 }} of {{ totalPages }} </span>
    <button (click)="changePage(currentPage + 1)" [disabled]="currentPage >= totalPages - 1">
      Next
    </button>
  </div>
</div>
